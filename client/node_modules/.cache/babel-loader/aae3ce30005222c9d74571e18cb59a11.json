{"ast":null,"code":"import { takeEvery } from 'redux-saga/effects';\nimport ShopActionTypes from './shop.types';\nimport { firestore, convertCollectionsSnapshotToMap } from '../../firebase/firebase.utils';\nexport function* fetchCollectionsAsync() {\n  const collectionRef = firestore.collection('collections');\n  dispatch(fetchCollectionsStart());\n  collectionRef.get().then(snapshot => {\n    const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n    dispatch(fetchCollectionsSuccess(collectionsMap));\n    this.setState({\n      loading: false\n    });\n  }).catch(error => dispatch(fetchCollectionsFailure(error.message)));\n}\nexport function* fetchCollectionsStart() {\n  yield takeEvery(ShopActionTypes.FETCH_COLLECTIONS_START, fetchCollectionsAsync);\n}","map":{"version":3,"sources":["/home/cc/Schreibtisch/tutorial/projekt/crw-clothing/src/redux/shop/shop.sagas.js"],"names":["takeEvery","ShopActionTypes","firestore","convertCollectionsSnapshotToMap","fetchCollectionsAsync","collectionRef","collection","dispatch","fetchCollectionsStart","get","then","snapshot","collectionsMap","fetchCollectionsSuccess","setState","loading","catch","error","fetchCollectionsFailure","message","FETCH_COLLECTIONS_START"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,oBAAxB;AACA,OAAOC,eAAP,MAA4B,cAA5B;AACA,SAAQC,SAAR,EAAkBC,+BAAlB,QAAwD,+BAAxD;AAEA,OAAO,UAAUC,qBAAV,GAAiC;AAEhC,QAAMC,aAAa,GAAGH,SAAS,CAACI,UAAV,CAAqB,aAArB,CAAtB;AACAC,EAAAA,QAAQ,CAACC,qBAAqB,EAAtB,CAAR;AACAH,EAAAA,aAAa,CACZI,GADD,GAECC,IAFD,CAEMC,QAAQ,IAAI;AACd,UAAMC,cAAc,GAAGT,+BAA+B,CAACQ,QAAD,CAAtD;AACAJ,IAAAA,QAAQ,CAACM,uBAAuB,CAACD,cAAD,CAAxB,CAAR;AACF,SAAKE,QAAL,CAAc;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAd;AACC,GANH,EAMKC,KANL,CAMWC,KAAK,IAAEV,QAAQ,CAACW,uBAAuB,CAACD,KAAK,CAACE,OAAP,CAAxB,CAN1B;AAOH;AAGL,OAAO,UAAUX,qBAAV,GAAiC;AACpC,QAAMR,SAAS,CAACC,eAAe,CAACmB,uBAAjB,EAAyChB,qBAAzC,CAAf;AACH","sourcesContent":["import {takeEvery} from 'redux-saga/effects'\nimport ShopActionTypes from './shop.types';\nimport {firestore,convertCollectionsSnapshotToMap} from '../../firebase/firebase.utils'\n\nexport function* fetchCollectionsAsync(){\n   \n        const collectionRef = firestore.collection('collections');\n        dispatch(fetchCollectionsStart());\n        collectionRef\n        .get()\n        .then(snapshot => {\n            const collectionsMap = convertCollectionsSnapshotToMap(snapshot)\n            dispatch(fetchCollectionsSuccess(collectionsMap));\n          this.setState({loading: false})\n          }).catch(error=>dispatch(fetchCollectionsFailure(error.message)))\n    }\n\n\nexport function* fetchCollectionsStart(){\n    yield takeEvery(ShopActionTypes.FETCH_COLLECTIONS_START,fetchCollectionsAsync);\n}"]},"metadata":{},"sourceType":"module"}